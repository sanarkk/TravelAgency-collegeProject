-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.tours
(
    "Name" text NOT NULL,
    "Price" integer NOT NULL,
    "ID" bigserial NOT NULL,
    "Info_id" integer NOT NULL,
    "DEparture_id" integer NOT NULL,
    "Night_Amout" integer NOT NULL,
    PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS public."AdditionalInfo"
(
    "Country" text NOT NULL,
    "Hotel" text NOT NULL,
    "Rate" integer NOT NULL,
    "ID" integer NOT NULL,
    PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS public."Departure"
(
    "Place" text NOT NULL,
    "Date" integer NOT NULL,
    "ID" integer NOT NULL,
    PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS public."User_Ticket"
(
    "ID" integer NOT NULL,
    "Tour_ID" integer NOT NULL,
    "Manager_ID" integer NOT NULL,
    "User_ID" integer NOT NULL,
    PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS public."ManagerAccount"
(
    "ID" integer NOT NULL,
    login text NOT NULL,
    password text NOT NULL,
    PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS public."User_Info"
(
    "Name" text,
    "Surname" text,
    "Address" text,
    "Gender" text,
    "Birthday" integer,
    "PhoneNumber" text,
    "PassportNumber" text,
    "ID" integer NOT NULL,
    PRIMARY KEY ("ID")
);

ALTER TABLE IF EXISTS public.tours
    ADD CONSTRAINT "DEparture_id" FOREIGN KEY ("DEparture_id")
    REFERENCES public."Departure" ("ID") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."User_Ticket"
    ADD CONSTRAINT "Tour_id" FOREIGN KEY ("Tour_ID")
    REFERENCES public.tours ("ID") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."User_Ticket"
    ADD CONSTRAINT "Manager_id" FOREIGN KEY ("Manager_ID")
    REFERENCES public."ManagerAccount" ("ID") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."User_Ticket"
    ADD CONSTRAINT "User_ID" FOREIGN KEY ("User_ID")
    REFERENCES public."User_Info" ("ID") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;
